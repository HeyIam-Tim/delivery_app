{% load static %}

<!-- подвал для десктопа -->
<div id="" class="flex flex-col bg-white sm:bg-gray-600">
    <div id="pages_container" class="footer bg-gray-600 text-xs flex flex-row" style="padding: 18px 0px;">
        <a href="{% url 'feedbacks' %}" class="block mx-3 text-white cursor-pointer" target="_blank">Отзывы/пожелания</a>
    </div>
    <div class="hidden md:block py-3">
        <img class="w-2/3 mx-auto" src="{% static 'images/payment.png' %}" alt="payment">
    </div>
</div>
<!--  -->


<!-- подвал для мобилки -->
{% if request.user.is_authenticated %}
<div class="flex text-center py-3 bg-gray-100 border-t mobile-footer">
    <a href="/" class="px-5 sm:px-8 text-gray-400"><img class="inline" src="{% static 'images/home-icon-svg.svg' %}" alt="home-icon-svg"><span class="block text-xs leading-3 pt-1">Главная</span></a>
    <a href="{% url 'cart:orders' %}" class="px-5 sm:px-8 text-gray-400"><img class="inline" src="{% static 'images/orders-icon.svg' %}" alt="orders-icon"><span class="block text-xs leading-3 pt-1">Заказы</span></a>
    <a href="{% url 'profile-garage' %}" class="px-5 sm:px-8 text-gray-400"><img class="inline" src="{% static 'images/garage-icon.svg' %}" alt="garage-icon"><span class="block text-xs leading-3 pt-1">Гараж</span></a>
    <a href="{% url 'cart:cart' %}" title="Корзина" class="cart_order_count_displayed_parent relative cursor-pointer px-5 sm:px-8 text-gray-400 hidden"><small id="footer_cart_count" class="cart_order_count_displayed absolute rounded-full bg-gray-400 text-white text-xs leading-3 p-1 px-1.5" style="top: -15%; left: 52%;">{% if request.user.cart.get_cart_items_count_all %}{{request.user.cart.get_cart_items_count_all}}{% else %}0{% endif %}</small><img class="inline" src="{% static 'images/cart-icon.svg' %}" alt="garage-icon"><span class="block text-xs leading-3">Корзина</span></a>
</div>
{% endif %}
<div class="w-full bg-gray-100 md:hidden py-3">
    <img class="w-1/3 mx-auto" src="{% static 'images/payment.png' %}" alt="payment">
</div>
<!--  -->


<script>
    let footer_url = `${window.location.origin}/api/v0/pages/`;
    fetch(footer_url)
    .then(res => res.json())
    .then(data => {
        let pages_container = document.querySelector('#pages_container');
    
        let pages_container_m = document.querySelector('#pages_container_m');
        pages_container_m.innerHTML = `<a href="${window.location.origin}/feedbacks/" class="cursor-pointer block mb-4 ml-6 text-white">Отзывы/пожелания</a>`;

        for (const page of data.pages) {
            pages_container.innerHTML += `<a href="${window.location.origin}/${page.path}/" class="cursor-pointer text-white mx-3">${page.title}</a>`;

            pages_container_m.innerHTML += `<a href="${window.location.origin}/${page.path}/" class="cursor-pointer block mb-4 ml-6 text-white">${page.title}</a>`;
        }
    })
</script>
